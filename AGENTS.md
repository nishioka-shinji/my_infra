# AGENTS.md

このドキュメントは、AIソフトウェアエンジニアリングエージェントがこのリポジトリで作業する際のガイドラインを記載しています。

## Terraformのコーディング規約

Terraformのコードを記述する際は、以下の規約に従ってください。

1.  **`data`リソースの分離**
    *   すべての`data`リソースは、`data.tf`という名前の専用ファイルにまとめて記述してください。これにより、データソースの参照が容易になります。

2.  **ファイル構成**
    *   **`variables.tf`**: 変数の定義を記述します。
    *   **`outputs.tf`**: アウトプットの定義を記述します。
    *   **`providers.tf`**: プロバイダーの定義を記述します。
    *   **`main.tf`**: 主要なリソースを記述します。リソースが多くなる場合は、機能ごと（例: `network.tf`, `compute.tf`）にファイルを分割してください。

3.  **フォーマット**
    *   コードを変更した際は、必ず`terraform fmt`コマンドを実行して、コードを整形してください。

## 一般的なガイドライン

*   **コミットメッセージ**: Conventional Commitsの規約に従ってください。
*   **Pull Request**: Pull Requestのタイトルと説明は、日本語で記述してください。
*   **テスト**: 変更を加えた後は、関連するテスト（統合テスト、ユニットテストなど）を実行して、既存の機能に影響がないことを確認してください。
*   **機密情報**: APIキーやパスワードなどの機密情報をコードにハードコードしないでください。
*   **プランの確認**: `terraform apply`を実行する前に、必ず`terraform plan`の結果を確認し、意図しない変更が含まれていないことを確認してください。

## ワークフロー自動化

特定のキーワードに応じて、以下の操作を自動で実行してください。

### GKEの起動・停止

-   **キーワード**: `!gke_start`
-   **アクション**: 以下の内容でPull Requestを作成してください。
    -   **ファイル**: `k8s/gcp/atlantis/helm-release.yaml`
    -   **変更点**:
        -   `spec.values.replicaCount`: `1`

-   **キーワード**: `!gke_stop`
-   **アクション**: 以下の内容でPull Requestを作成してください。
    -   **ファイル**: `k8s/gcp/atlantis/helm-release.yaml`
    -   **変更点**:
        -   `spec.values.replicaCount`: `0`
